{% load static %}

<link rel="stylesheet" href="{% static 'shop.css' %}">

<h2>Catálogo de productos</h2>

<!-- BUSCADOR -->
<form method="GET" class="search-box">
    <input type="text" name="search" placeholder="Buscar productos..." value="{{ request.GET.search }}">
    <button type="submit">Buscar</button>
</form>

<!-- CATEGORÍAS -->
<div class="category-wrapper">
    <div class="category-container">
        
        {% for category in categories %}
        <a href="?category={{ category.id }}" class="category-item">

            <!-- Sticker HOT (opcional: puedes ponerlo según condiciones )-->
            {% if category.hot %}
            <span class="category-badge">HOT</span>
            {% endif %}

            <img src="{{ category.image.url }}" class="category-img">

            <div class="category-name">{{ category.name }}</div>
        </a>
        {% endfor %}
    </div>
</div>

<!-- PRODUCTOS -->
<div class="product-grid">

    {% for product in products %}
    <div class="product-card">
        <img src="{{ product.image.url }}" alt="{{ product.name }}">
        <div class="product-name">{{ product.name }}</div>
        <div class="product-price">${{ product.price }}</div>
        <div class="product-description">{{ product.description|truncatewords:12 }}</div>
        
        <form method="POST" action="{% url 'add_to_cart' product.id %}">
            {% csrf_token %}
            <button type="submit" class="add-cart-btn">Añadir al carrito</button>
        </form>

    </div>
    {% empty %}
    <p>No hay productos disponibles.</p>
    {% endfor %}

</div>