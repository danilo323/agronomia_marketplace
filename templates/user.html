{% load static %}

<!DOCTYPE html>
<html lang="es">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>Perfil de Usuario</title>
Â  Â  <link rel="stylesheet" href="{% static 'style.css' %}">
</head>
<body>
Â  Â  
    <div class="floating-shape shape-1">â­</div>
    <div class="floating-shape shape-2">ğŸš€</div>
    <div class="floating-shape shape-3">ğŸ’¡</div>
    <div class="floating-shape shape-4">âœ¨</div>
    
Â  Â  <div class="profile-container">
        
        <a href="{% url 'home' %}" class="back-btn" style="
            padding: 10px 18px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            text-decoration: none;
            display: inline-block;">
            â¬… AtrÃ¡s
        </a>



        {% if messages %}
            {% for message in messages %}
                <p class="django-message {{ message.tags }}" style="display:block;">{{ message }}</p>
            {% endfor %}
        {% endif %}

        <div class="profile-header">
            <div class="avatar">
                <img id="profile-image" alt="" src="{% if user.profile.profile_picture %}{{ user.profile.profile_picture.url }}{% else %}{% static 'images/default_user.svg' %}{% endif %}">
            </div>
            <div class="photo-actions" style="margin-top:12px; display:flex; gap:10px; justify-content:center;">
                <button type="button" class="edit-btn">Cambiar Foto</button>
                
            </div>
        </div>

Â  Â  Â  Â  <div class="user-info">
Â  Â  Â  Â  Â  Â  <h2>InformaciÃ³n del Usuario</h2>
            
            <form id="info-form" action="{% url 'user' %}" method="POST" enctype="multipart/form-data">
                {% csrf_token %} 
            
                <div class="info-item">
                    <label for="username">Nombre de Usuario:</label>
                    <input type="text" id="username" name="username" value="{{ user.username }}" readonly required>
                    <p id="username-error" class="validation-error hidden"></p>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="info-item">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="full-name">Nombres y Apellidos:</label>
                    <input type="text" id="full-name" name="full-name" value="{{ user.first_name }} {{ user.last_name }}" readonly>
                    <p id="full-name-error" class="validation-error hidden"></p>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="info-item">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="email">Email:</label>
                    <input type="email" id="email" name="email" value="{{ user.email }}" readonly>
                    <p id="email-error" class="validation-error hidden"></p>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
                <input type="file" id="profile-input" name="profile_picture" accept="image/*" style="display:none;">
                <input type="hidden" name="form_type" value="profile_update">
                
                <button type="button" class="edit-info-btn">Editar InformaciÃ³n</button>
            </form>
            Â  Â  Â  Â  </div>

    <div class="password-change">
        <h2>Cambiar ContraseÃ±a</h2>
            <form id="password-form" method="POST" action="{% url 'user' %}">
                {% csrf_token %} 
                <input type="hidden" name="form_type" value="password_change">
                <div class="info-item">
                    <label for="current-password">ContraseÃ±a Actual:</label>
                    <div class="password-wrapper" style="display:flex; gap:8px; align-items:center;">
                        <input type="password" id="current-password" name="current-password" required>
                        <button type="button" class="toggle-pass" data-target="current-password" aria-label="Mostrar contraseÃ±a">ğŸ‘ï¸</button>
                    </div>
                </div>
                <div class="info-item">
                    <label for="new-password">Nueva ContraseÃ±a:</label>
                    <div class="password-wrapper" style="display:flex; gap:8px; align-items:center;">
                        <input type="password" id="new-password" name="new-password" required>
                        <button type="button" class="toggle-pass" data-target="new-password" aria-label="Mostrar contraseÃ±a">ğŸ‘ï¸</button>
                    </div>
                </div>
                <div class="info-item">
                    <label for="confirm-password">Confirmar ContraseÃ±a:</label>
                    <div class="password-wrapper" style="display:flex; gap:8px; align-items:center;">
                        <input type="password" id="confirm-password" name="confirm-password" required>
                        <button type="button" class="toggle-pass" data-target="confirm-password" aria-label="Mostrar contraseÃ±a">ğŸ‘ï¸</button>
                    </div>
                </div>
                <button type="submit" class="change-password-btn">Guardar Nueva ContraseÃ±a</button>
            </form>
Â  Â  Â  Â  Â  Â  <p id="message" class="hidden"></p>
Â  Â  Â  Â  </div>
Â  Â  </div>

    Â  Â  <script src="{% static 'js/user_script.js' %}"></script>
</body>
</html>